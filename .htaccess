# Net Inventory - Root .htaccess
# Redirects all requests to /public directory

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Redirect all requests to /public folder
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ public/$1 [L]
    
    # If accessing /public directly, redirect to root
    RewriteCond %{REQUEST_URI} ^/public/(.*)$
    RewriteRule ^public/(.*)$ /$1 [L,R=301]
</IfModule>

# Protect sensitive directories and files
<FilesMatch "(\.env|\.git|composer\.(json|lock)|\.md|migrations|scripts)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Prevent directory listing
Options -Indexes

# Block access to directories
RedirectMatch 403 ^/(migrations|scripts|src|templates|vendor|docs)/
